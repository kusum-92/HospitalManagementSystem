@model HospitalManagementSystem.Models.ChangePasswordViewModel
@{
    ViewData["Title"] = "Change Password";
}

@section PageBackground {
    <div class="account-bg-fixed" aria-hidden="true"></div>
    <div class="account-bg-overlay" aria-hidden="true"></div>
}

<style>
    :root { --header-height:70px; --footer-height:64px; --primary:#5b8df9; --secondary:#7b5cfb; --accent:#17c0b5;
        --grad-accent:linear-gradient(90deg,#17c0b5,#3aa0ff); --panel-bg:linear-gradient(145deg,rgba(255,255,255,0.92),rgba(255,255,255,0.80));
        --muted:#5c6672; --text:#243041; }
    [data-theme="dark"] :root { --panel-bg:linear-gradient(145deg,rgba(36,48,62,0.92),rgba(26,36,48,0.88)); --muted:#c2ced8; --text:#f3f7fa; }

    .account-bg-fixed{position:fixed;top:var(--header-height);left:0;right:0;bottom:var(--footer-height);
        background-image:url('@Url.Content("~/images/dept.png")');background-size:cover;background-position:center;z-index:0;}
    .account-bg-overlay{position:fixed;top:var(--header-height);left:0;right:0;bottom:var(--footer-height);
        background:linear-gradient(to bottom,rgba(255,255,255,0.30),rgba(255,255,255,0.08));z-index:1;pointer-events:none;}
    [data-theme="dark"] .account-bg-overlay{background:linear-gradient(to bottom,rgba(0,0,0,0.55),rgba(0,0,0,0.35));}

    .cp-wrapper{position:relative;z-index:2;max-width:520px;margin:0 auto;
        padding:42px 12px 80px;min-height:calc(100vh - var(--header-height) - var(--footer-height));display:flex;align-items:flex-start;}

    .cp-panel{background:var(--panel-bg);border:1px solid rgba(120,140,170,0.30);border-radius:34px;
        padding:56px 54px 60px;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
        box-shadow:0 30px 78px rgba(40,70,140,0.26);position:relative;overflow:hidden;animation:fadeCP .55s ease;}
    [data-theme="dark"] .cp-panel{border:1px solid rgba(255,255,255,0.12);box-shadow:0 32px 84px rgba(0,0,0,0.70);}

    .cp-panel::before{content:"";position:absolute;width:560px;height:560px;top:-270px;left:-270px;
        background:radial-gradient(circle at 55% 55%,rgba(91,141,249,0.30),transparent 72%);pointer-events:none;}
    [data-theme="dark"] .cp-panel::before{background:radial-gradient(circle at 55% 55%,rgba(91,141,249,0.22),transparent 74%);}

    h1.title{font-size:2rem;font-weight:700;margin:0 0 14px;
        background:linear-gradient(90deg,#5b8df9,#7b5cfb);-webkit-background-clip:text;background-clip:text;color:transparent;}
    [data-theme="dark"] h1.title{background:linear-gradient(90deg,#d5e6ff,#eddfff);text-shadow:0 0 6px rgba(255,255,255,0.35),0 2px 10px rgba(0,0,0,0.65);}
    .subtitle{color:var(--muted);font-size:.85rem;margin:0 0 32px;letter-spacing:.4px;text-transform:uppercase;font-weight:600;}
    [data-theme="dark"] .subtitle{color:#bfcbd5;}

    label.control-label{font-weight:600;letter-spacing:.35px;color:var(--text);}
    [data-theme="dark"] label.control-label{color:#f1f6fa;}

    .cp-panel .form-control{
        background:rgba(255,255,255,0.85);border:1px solid rgba(120,140,170,0.35);transition:.25s;
    }
    [data-theme="dark"] .cp-panel .form-control{
        background:rgba(48,62,82,0.82);border:1px solid rgba(255,255,255,0.14);color:#eef4f9;
    }
    .cp-panel .form-control:focus{
        border-color:var(--primary);box-shadow:0 0 0 4px rgba(91,141,249,0.30);background:rgba(255,255,255,0.97);
    }
    [data-theme="dark"] .cp-panel .form-control:focus{
        background:rgba(58,72,92,0.95);box-shadow:0 0 0 4px rgba(91,141,249,0.50);
    }

    .btn-accent{
        background:var(--grad-accent);color:#fff;border:none;border-radius:18px;
        padding:14px 32px;font-weight:600;letter-spacing:.5px;box-shadow:0 20px 56px rgba(56,160,255,0.40);
        transition:.35s;width:100%;margin-top:4px;
    }
    .btn-accent:hover{transform:translateY(-4px);box-shadow:0 30px 70px rgba(56,160,255,0.48);filter:brightness(.97);}

    .alert-success{
        background:linear-gradient(145deg,#e6fff8,#dcf7ff);
        border:1px solid rgba(120,140,170,0.25);
        border-radius:18px;
        box-shadow:0 12px 38px rgba(40,70,140,0.15);
    }

    @@keyframes fadeCP {
        from { opacity:0; transform:translateY(20px); }
        to { opacity:1; transform:translateY(0); }
    }

    @@media (max-width:640px){
        .cp-panel { padding:48px 40px 54px; }
    }
</style>

<div class="cp-wrapper">
    <div class="cp-panel">
        <h1 class="title">Change Password</h1>
        <div class="subtitle">Update your credentials securely</div>

        <form asp-action="ChangePassword" method="post">
            <div class="mb-4">
                <label asp-for="OldPassword" class="control-label">Old Password</label>
                <input asp-for="OldPassword" class="form-control" type="password"/>
                <span asp-validation-for="OldPassword" class="text-danger small"></span>
            </div>

            <div class="mb-4">
                <label asp-for="NewPassword" class="control-label">New Password</label>
                <input asp-for="NewPassword" class="form-control" type="password"/>
                <span asp-validation-for="NewPassword" class="text-danger small"></span>
            </div>

            <div class="mb-4">
                <label asp-for="ConfirmPassword" class="control-label">Confirm Password</label>
                <input asp-for="ConfirmPassword" class="form-control" type="password"/>
                <span asp-validation-for="ConfirmPassword" class="text-danger small"></span>
            </div>

            <button type="submit" class="btn-accent">
                <i class="bi bi-shield-lock"></i> Update Password
            </button>
        </form>

        @if (ViewBag.Message != null)
        {
            <div class="alert alert-success mt-4">@ViewBag.Message</div>
        }

        <div class="mt-4 text-center">
            <a asp-controller="Doctor" asp-action="Dashboard" class="text-decoration-none" style="font-weight:600;">
                <i class="bi bi-arrow-left-circle"></i> Back to Dashboard
            </a>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial"/>
}