@model HospitalManagementSystem.Models.Appointment

@{
    ViewData["Title"] = "Appointment Details";
}

@section PageBackground {
    <div class="appt-bg-fixed" aria-hidden="true"></div>
    <div class="appt-bg-overlay" aria-hidden="true"></div>
}


<style>
    :root { --header-height:70px; --footer-height:64px; --primary:#5b8df9; --secondary:#7b5cfb; --accent:#17c0b5;
            --grad-main:linear-gradient(135deg,#5b8df9,#7b5cfb); --grad-accent:linear-gradient(90deg,#17c0b5,#3aa0ff);
            --panel-bg:linear-gradient(145deg,rgba(255,255,255,0.90),rgba(255,255,255,0.76)); --muted:#5c6672; --text:#243041; }
    [data-theme="dark"] :root { --panel-bg:linear-gradient(145deg,rgba(34,46,60,0.92),rgba(26,36,48,0.90)); --muted:#c2ced8; --text:#f3f7fa; }

    .appt-bg-fixed{position:fixed;top:var(--header-height);left:0;right:0;bottom:var(--footer-height);background-image:url('@Url.Content("~/images/dept.png")');background-size:cover;background-position:center;z-index:0;}
    .appt-bg-overlay{position:fixed;top:var(--header-height);left:0;right:0;bottom:var(--footer-height);background:linear-gradient(to bottom,rgba(255,255,255,0.30),rgba(255,255,255,0.08));z-index:1;pointer-events:none;}
    [data-theme="dark"] .appt-bg-overlay{background:linear-gradient(to bottom,rgba(0,0,0,0.55),rgba(0,0,0,0.35));}

    .details-wrapper{position:relative;z-index:2;max-width:980px;margin:0 auto;padding:36px 8px 64px;}
    .panel{background:var(--panel-bg);border:1px solid rgba(120,140,170,0.28);border-radius:34px;
        padding:56px 62px 62px;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
        box-shadow:0 28px 74px rgba(40,70,140,0.26);position:relative;overflow:hidden;animation:fadeDetails .55s ease;}
    [data-theme="dark"] .panel{border:1px solid rgba(255,255,255,0.10);box-shadow:0 28px 74px rgba(0,0,0,0.72);}
    .panel::before{content:"";position:absolute;width:560px;height:560px;top:-250px;right:-250px;
        background:radial-gradient(circle at 35% 40%,rgba(91,141,249,0.30),transparent 70%);}
    .panel::after{content:"";position:absolute;width:520px;height:520px;bottom:-260px;left:-260px;
        background:radial-gradient(circle at 60% 60%,rgba(123,92,251,0.24),transparent 72%);}
    [data-theme="dark"] .panel::before{background:radial-gradient(circle at 35% 40%,rgba(91,141,249,0.22),transparent 72%);}
    [data-theme="dark"] .panel::after{background:radial-gradient(circle at 60% 60%,rgba(123,92,251,0.18),transparent 74%);}

    h1.title{font-size:2.1rem;font-weight:700;margin:0 0 18px;
        background:linear-gradient(90deg,#5b8df9,#7b5cfb);-webkit-background-clip:text;background-clip:text;color:transparent;}
    [data-theme="dark"] h1.title{background:linear-gradient(90deg,#d5e6ff,#eddfff);text-shadow:0 0 6px rgba(255,255,255,0.35),0 2px 10px rgba(0,0,0,0.65);}

    dl{margin:0;display:grid;grid-template-columns:200px 1fr;row-gap:20px;column-gap:28px;}
    dt{font-weight:600;color:#2a3950;letter-spacing:.45px;}
    dd{margin:0;color:#455066;}
    [data-theme="dark"] dt{color:#f0f4f9;}
    [data-theme="dark"] dd{color:#d5dee6;}

    .badge-paid,.badge-unpaid{padding:6px 14px;font-size:.65rem;letter-spacing:.55px;font-weight:600;
        border-radius:999px;color:#fff;display:inline-flex;align-items:center;gap:.4rem;}
    .badge-paid{background:linear-gradient(135deg,#17c0b5,#3aa0ff);box-shadow:0 8px 24px rgba(56,160,255,0.38);}
    .badge-unpaid{background:linear-gradient(135deg,#ffb347,#ff7b36);box-shadow:0 8px 24px rgba(255,140,70,0.42);}

    .actions{margin-top:40px;display:flex;gap:16px;flex-wrap:wrap;justify-content:flex-end;}
    .btn-outline-primary, .btn-outline-danger{
        position:relative;overflow:hidden;
    }
    .btn-outline-primary:hover{box-shadow:0 8px 22px rgba(91,141,249,0.35);}
    .btn-outline-danger:hover{box-shadow:0 8px 22px rgba(255,90,120,0.35);}

    @@keyframes fadeDetails{from{opacity:0;transform:translateY(18px);}to{opacity:1;transform:translateY(0);}}
    @@media (max-width:780px){.panel{padding:48px 40px 56px;}dl{grid-template-columns:160px 1fr;row-gap:18px;}}
</style>

<div class="details-wrapper">
    <div class="panel">
        <h1 class="title">Appointment Details</h1>

        <dl class="mb-4">
            <dt>🗓️ Appointment Date</dt>
            <dd>@Model.AppointmentDate.ToString("f")</dd>

            <dt>👤 Patient</dt>
            <dd>@Model.Patient?.FullName</dd>

            <dt>👨‍⚕️ Doctor</dt>
            <dd>@Model.Doctor?.FullName (@Model.Doctor?.Specialization)</dd>

            @if (Model.Invoice != null)
            {
                <dt>💳 Invoice Status</dt>
                <dd>
                    @if (Model.Invoice.IsPaid)
                    { <span class="badge-paid"><i class="bi bi-check-circle"></i> Paid</span> }
                    else
                    { <span class="badge-unpaid"><i class="bi bi-exclamation-circle"></i> Unpaid</span> }
                </dd>

                <dt>🧾 Invoice Amount</dt>
                <dd>₹ @Model.Invoice.Amount</dd>

                <dt>📅 Invoice Issued</dt>
                <dd>@Model.Invoice.DateIssued.ToShortDateString()</dd>
            }
            else
            {
                <dt>💳 Invoice</dt>
                <dd class="text-muted">Not generated</dd>
            }
        </dl>

        <div class="actions">
            <a asp-action="Edit" asp-route-id="@Model.AppointmentId" class="btn btn-outline-primary">
                <i class="bi bi-pencil-square"></i> Edit
            </a>
            <a asp-action="Delete" asp-route-id="@Model.AppointmentId" class="btn btn-outline-danger">
                <i class="bi bi-trash"></i> Delete
            </a>
            @if (User.IsInRole("Patient"))
            {
                <a asp-controller="Patient" asp-action="MyAppointments" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
            }
            else
            {
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-arrow-left"></i> Back
                </a>
            }
        </div>
    </div>
</div>
